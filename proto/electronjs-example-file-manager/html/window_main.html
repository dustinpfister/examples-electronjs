<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>File Manager</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div id="wrap_main">

        <br><br>
        <input id="input_pwd" type="text">

        <br></br>
        <div id="contents_pwd">
        </div>


    </div>

    <script>
//-------- ----------
// HELPERS
//-------- ----------
// update contents with given files array
const createListContents = (files, el) => {
    // for each file
    const items = files.map( (itemData) => {
        const div = document.createElement('p');
        div.className = 'contents_item';
        div.innerText = itemData[0];
        return div;
    });
    el.replaceChildren(...items);
};
//-------- ----------
// STATE OBJECT
//-------- ----------
const state = {};
// start at root for now
state.pwd = "/";
state.el_contents_pwd = document.getElementById('contents_pwd');
state.el_input_pwd = document.getElementById('input_pwd');
//-------- ----------
// SETUP
//-------- ----------
// get contents of current value of state.pwd
fm.readdir(state.pwd)
.then((files)=>{
    createListContents(files, state.el_contents_pwd);
    state.el_input_pwd.value = state.pwd;
});
//-------- ----------
// INPUT_PWD
//-------- ----------
state.el_input_pwd.addEventListener('change', (e)=> {

console.log('yes');
    state.pwd = e.target.value;

    fm.readdir(state.pwd)
    .then((files)=>{
        createListContents(files, state.el_contents_pwd);
        state.el_input_pwd.value = state.pwd;
    });

});
    </script>
  </body>
</html>